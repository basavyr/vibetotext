<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VibeToText History</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Transcription History</h1>
      <div class="stats" id="stats">
        <span class="stat">
          <span class="stat-value" id="total-sessions">0</span>
          <span class="stat-label">chats</span>
        </span>
        <span class="stat">
          <span class="stat-value" id="total-words">0</span>
          <span class="stat-label">words</span>
        </span>
        <span class="stat">
          <span class="stat-value" id="avg-wpm">--</span>
          <span class="stat-label">avg WPM</span>
        </span>
        <span class="stat highlight">
          <span class="stat-value" id="time-saved">0</span>
          <span class="stat-label">min saved</span>
        </span>
      </div>
    </header>

    <div class="tabs" id="tabs">
      <button class="tab active" data-mode="all">All</button>
      <button class="tab" data-mode="transcribe">Transcribe</button>
      <button class="tab" data-mode="greppy">Greppy</button>
      <button class="tab" data-mode="cleanup">Cleanup</button>
      <button class="tab" data-mode="plan">Plan</button>
      <button class="tab" data-mode="analytics">Analytics</button>
      <button class="tab" data-mode="microphone">Microphone</button>
    </div>

    <div class="common-words" id="common-words-section">
      <h3>Top Words</h3>
      <div class="word-chips" id="common-words"></div>
    </div>

    <div class="entries" id="entries">
      <!-- Entries will be populated by JavaScript -->
    </div>

    <div class="empty-state" id="empty-state" style="display: none;">
      <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <p>No transcriptions yet</p>
      <p class="hint">ctrl+shift to record</p>
    </div>

    <div class="microphone-panel" id="microphone-panel" style="display: none;">
      <div class="mic-settings">
        <h3>Audio Input Device</h3>
        <p class="mic-description">Select the microphone to use for voice recording.</p>
        <select id="mic-select" class="mic-dropdown">
          <option value="">Loading devices...</option>
        </select>
        <p class="mic-status" id="mic-status"></p>
      </div>
    </div>

    <div class="analytics-panel" id="analytics-panel" style="display: none;">
      <div class="chart-grid">
        <!-- Streaks & Records -->
        <div class="chart-card">
          <h3>Streaks</h3>
          <div id="streaks-card"></div>
        </div>
        <div class="chart-card">
          <h3>Personal Records</h3>
          <div id="records-card"></div>
        </div>

        <!-- Goals -->
        <div class="chart-card full-width">
          <h3>Daily Goal Progress</h3>
          <div id="goals-card"></div>
        </div>

        <!-- Activity Heatmap -->
        <div class="chart-card full-width">
          <h3>Activity by Hour</h3>
          <div id="activity-heatmap"></div>
        </div>

        <!-- Time Charts -->
        <div class="chart-card">
          <h3>Words Over Time</h3>
          <div id="words-chart"></div>
        </div>
        <div class="chart-card">
          <h3>Time Saved</h3>
          <div id="time-saved-chart"></div>
        </div>
        <div class="chart-card">
          <h3>Speaking Speed (WPM)</h3>
          <div id="wpm-chart"></div>
        </div>
        <div class="chart-card">
          <h3>Usage by Mode</h3>
          <div id="mode-donut"></div>
        </div>

        <!-- Period Comparison -->
        <div class="chart-card full-width">
          <h3>This Week vs Last Week</h3>
          <div id="period-comparison"></div>
        </div>

        <!-- Speech Patterns -->
        <div class="chart-card">
          <h3>Filler Words</h3>
          <div id="filler-words"></div>
        </div>
        <div class="chart-card">
          <h3>Vocabulary Diversity</h3>
          <div id="vocabulary-diversity"></div>
        </div>
        <div class="chart-card full-width">
          <h3>Common Phrases</h3>
          <div id="common-phrases"></div>
        </div>

        <!-- WPM by Hour -->
        <div class="chart-card full-width">
          <h3>WPM by Hour of Day</h3>
          <div id="wpm-by-hour"></div>
        </div>

        <!-- Session Length -->
        <div class="chart-card full-width">
          <h3>Session Length Distribution</h3>
          <div id="session-histogram"></div>
        </div>

        <!-- Word Cloud -->
        <div class="chart-card full-width">
          <h3>Word Cloud</h3>
          <div id="word-cloud"></div>
        </div>

        <!-- Sentiment -->
        <div class="chart-card full-width">
          <h3>Sentiment Over Time</h3>
          <div id="sentiment-chart"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="lib/d3.min.js"></script>
  <script src="analytics.js"></script>
  <script src="renderer.js"></script>
</body>
</html>
